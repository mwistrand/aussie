# Test configuration for Aussie Gateway

# Forwarding headers
aussie.gateway.forwarding.use-rfc7239=true

# Request size limits (smaller for testing)
aussie.gateway.limits.max-body-size=1048576
aussie.gateway.limits.max-header-size=4096
aussie.gateway.limits.max-total-headers-size=16384

# Security configuration - allow public default visibility for testing
aussie.gateway.security.public-default-visibility-enabled=true

# Global access control for testing
aussie.gateway.access-control.allowed-ips=127.0.0.1,10.0.0.0/8,192.168.0.0/16
aussie.gateway.access-control.allowed-domains=internal.test.com
aussie.gateway.access-control.allowed-subdomains=*.internal.test.com

# Storage configuration - use in-memory for tests (no external dependencies)
aussie.storage.repository.provider=memory
aussie.storage.cache.enabled=false

# Auth key storage configuration - use in-memory for tests
aussie.auth.storage.provider=memory
aussie.auth.cache.enabled=false

# Role storage configuration - use in-memory for tests
aussie.auth.roles.storage.provider=memory

# Disable Redis health check for tests
quarkus.redis.health.enabled=false

# Authentication - disabled for existing tests
# New auth-specific tests should enable auth and provide credentials
aussie.auth.dangerous-noop=true

# Session configuration for tests - disabled by default
aussie.session.enabled=false
aussie.session.ttl=PT8H
aussie.session.idle-timeout=PT30M
aussie.session.sliding-expiration=true
aussie.session.id-generation.max-retries=3
aussie.session.cookie.name=aussie_session
aussie.session.cookie.path=/
aussie.session.cookie.secure=false
aussie.session.cookie.http-only=true
aussie.session.cookie.same-site=Lax
aussie.session.storage.provider=memory
aussie.session.storage.redis.key-prefix=aussie:session:
aussie.session.jws.enabled=false
aussie.session.jws.ttl=PT5M
aussie.session.jws.issuer=aussie-gateway
aussie.session.jws.include-claims=sub,email,name,roles

# Route auth disabled for tests
aussie.auth.route-auth.enabled=false

# PKCE configuration for tests - enabled with in-memory storage
aussie.auth.pkce.enabled=true
aussie.auth.pkce.required=true
aussie.auth.pkce.challenge-ttl=PT10M
aussie.auth.pkce.storage.provider=memory
aussie.auth.pkce.storage.redis.key-prefix=aussie:pkce:

# OIDC Token Exchange for tests - enabled with mock configuration
aussie.auth.oidc.token-exchange.enabled=true
aussie.auth.oidc.token-exchange.create-session=false
aussie.auth.oidc.token-exchange.provider=default
aussie.auth.oidc.token-exchange.token-endpoint=http://mock-idp.test/token
aussie.auth.oidc.token-exchange.client-id=test-client
aussie.auth.oidc.token-exchange.client-secret=test-secret
aussie.auth.oidc.token-exchange.client-auth-method=client_secret_basic
aussie.auth.oidc.token-exchange.scopes=openid,profile,email
aussie.auth.oidc.token-exchange.timeout=PT10S
aussie.auth.oidc.token-exchange.refresh-token.store=false

# CORS configuration for tests
aussie.gateway.cors.enabled=true
aussie.gateway.cors.allowed-origins=*
aussie.gateway.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS,HEAD
aussie.gateway.cors.allowed-headers=Content-Type,Authorization,X-Requested-With,Accept,Origin
aussie.gateway.cors.allow-credentials=true
aussie.gateway.cors.max-age=3600

# Rate limiting configuration for tests - disabled by default to avoid event loop blocking
# Rate limiting tests should enable it explicitly with proper worker thread handling
aussie.rate-limiting.enabled=false
aussie.rate-limiting.redis.enabled=false

# Auth rate limiting (brute force protection) - disabled for most tests
aussie.auth.rate-limit.enabled=false
